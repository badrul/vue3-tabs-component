(function(d,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis!="undefined"?globalThis:d||self,e(d.VueTabs={},d.Vue))})(this,function(d,e){"use strict";var f=(a,o)=>{const t=a.__vccOpts||a;for(const[l,c]of o)t[l]=c;return t};const g={name:"Tab",props:{panelClass:{type:String,default:"tabs-component-panel"},id:{type:String,default:null},name:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},isDisabled:{type:Boolean,default:!1}},setup(a){const o=e.ref(!1),t=e.inject("tabsProvider"),l=e.inject("addTab"),c=e.inject("updateTab"),r=e.inject("deleteTab"),n=a.prefix+a.name+a.suffix,s=a.id?a.id:a.name.toLowerCase().replace(/ /g,"-"),i="#"+(a.isDisabled?"":s);return e.watch(()=>t.activeTabHash,()=>{o.value=i===t.activeTabHash}),e.watch(()=>Object.assign({},a),()=>{c(s,{name:a.name,header:a.prefix+a.name+a.suffix,isDisabled:a.isDisabled,hash:i,index:t.tabs.length,computedId:s})}),e.onBeforeMount(()=>{l({name:a.name,header:n,isDisabled:a.isDisabled,hash:i,index:t.tabs.length,computedId:s})}),e.onBeforeUnmount(()=>{r(s)}),{header:n,computedId:s,hash:i,isActive:o}}},T=["id","aria-hidden"];function C(a,o,t,l,c,r){return e.withDirectives((e.openBlock(),e.createElementBlock("section",{id:l.computedId,ref:"tab","aria-hidden":!l.isActive,class:e.normalizeClass(t.panelClass),role:"tabpanel"},[e.renderSlot(a.$slots,"default")],10,T)),[[e.vShow,l.isActive]])}var h=f(g,[["render",C]]);class v{get(o){const t=JSON.parse(localStorage.getItem(o));return t?new Date(t.expires)<new Date?(localStorage.removeItem(o),null):t.value:null}set(o,t,l){const c=new Date().getTime(),r=new Date(c+l*6e4);localStorage.setItem(o,JSON.stringify({value:t,expires:r}))}}var m=new v;const w={props:{cacheLifetime:{type:Number,default:5},tabsId:{type:String,default:""},options:{type:Object,required:!1,default:()=>({useUrlFragment:!0,defaultTabHash:null})},wrapperClass:{type:String,default:"tabs-component"},panelsWrapperClass:{type:String,default:"tabs-component-panels"},navClass:{type:String,default:"tabs-component-tabs"},navItemClass:{type:String,default:"tabs-component-tab"},navItemDisabledClass:{type:String,default:"is-disabled"},navItemActiveClass:{type:String,default:"is-active"},navItemLinkClass:{type:String,default:"tabs-component-tab-a"},navItemLinkActiveClass:{type:String,default:"is-active"},navItemLinkDisabledClass:{type:String,default:"is-disabled"}},emits:["changed","clicked"],setup(a,o){const t=e.reactive({activeTabHash:"",lastActiveTabHash:"",tabs:[]}),l=e.computed(()=>a.tabsId);e.provide("tabsProvider",t),e.provide("addTab",n=>{t.tabs.push(n)}),e.provide("updateTab",(n,s)=>{let i=t.tabs.findIndex(b=>b.computedId===n);s.isActive=t.tabs[i].isActive,t.tabs[i]=s}),e.provide("deleteTab",n=>{let s=t.tabs.findIndex(i=>i.computedId===n);t.tabs.splice(s,1)});const c=(n,s)=>{s&&!a.options.useUrlFragment&&s.preventDefault();const i=r(n);if(!i)return;if(s&&i.isDisabled){s.preventDefault();return}if(t.lastActiveTabHash===i.hash){o.emit("clicked",{tab:i});return}t.tabs.forEach(p=>{p.isActive=p.hash===i.hash}),o.emit("changed",{tab:i}),t.lastActiveTabHash=t.activeTabHash=i.hash;const b=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`;m.set(b+l.value,i.hash,a.cacheLifetime)},r=n=>t.tabs.find(s=>s.hash===n);return e.onMounted(()=>{if(!t.tabs.length)return;if(window.addEventListener("hashchange",()=>c(window.location.hash)),r(window.location.hash)){c(window.location.hash);return}const n=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`,s=m.get(n+l.value);if(r(s)){c(s);return}if(a.options.defaultTabHash&&r("#"+a.options.defaultTabHash)){c("#"+a.options.defaultTabHash);return}c(t.tabs[0].hash)}),{...e.toRefs(t),selectTab:c,findTab:r}}},I=["aria-controls","aria-selected","href","onClick","innerHTML"];function S(a,o,t,l,c,r){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.wrapperClass)},[e.createElementVNode("ul",{role:"tablist",class:e.normalizeClass(t.navClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.tabs,(n,s)=>(e.openBlock(),e.createElementBlock("li",{key:s,class:e.normalizeClass([t.navItemClass,n.isDisabled?t.navItemDisabledClass:"",n.isActive?t.navItemActiveClass:""]),role:"presentation"},[e.createElementVNode("a",{role:"tab",class:e.normalizeClass([t.navItemLinkClass,n.isDisabled?t.navItemLinkDisabledClass:"",n.isActive?t.navItemLinkActiveClass:""]),"aria-controls":n.hash,"aria-selected":n.isActive,href:n.hash,onClick:i=>l.selectTab(n.hash,i),innerHTML:n.header},null,10,I)],2))),128))],2),e.createElementVNode("div",{class:e.normalizeClass(t.panelsWrapperClass)},[e.renderSlot(a.$slots,"default")],2)],2)}var u=f(w,[["render",S]]),y={install(a){a.component("tab",h),a.component("tabs",u)}};d.Tab=h,d.Tabs=u,d.default=y,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
