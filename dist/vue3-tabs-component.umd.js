(function(r,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(r=typeof globalThis!="undefined"?globalThis:r||self,e(r.VueTabs={},r.Vue))})(this,function(r,e){"use strict";var f=(a,l)=>{const t=a.__vccOpts||a;for(const[c,o]of l)t[c]=o;return t};const g={name:"Tab",props:{panelClass:{type:String,default:"tabs-component-panel"},id:{type:String,default:null},name:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},isDisabled:{type:Boolean,default:!1}},setup(a){const l=e.ref(!1),t=e.inject("tabsProvider"),c=e.inject("addTab"),o=e.inject("updateTab"),d=e.inject("deleteTab"),n=a.prefix+a.name+a.suffix,s=a.id?a.id:a.name.toLowerCase().replace(/ /g,"-"),i="#"+(a.isDisabled?"":s);return e.watch(()=>t.activeTabHash,()=>{l.value=i===t.activeTabHash}),e.watch(()=>Object.assign({},a),()=>{o(s,{name:a.name,header:a.prefix+a.name+a.suffix,isDisabled:a.isDisabled,hash:i,index:t.tabs.length,computedId:s})}),e.onBeforeMount(()=>{c({name:a.name,header:n,isDisabled:a.isDisabled,hash:i,index:t.tabs.length,computedId:s})}),e.onBeforeUnmount(()=>{d(s)}),{header:n,computedId:s,hash:i,isActive:l}}},T=["id","aria-hidden"];function I(a,l,t,c,o,d){return e.withDirectives((e.openBlock(),e.createElementBlock("section",{id:c.computedId,ref:"tab","aria-hidden":!c.isActive,class:e.normalizeClass(t.panelClass),role:"tabpanel"},[e.renderSlot(a.$slots,"default")],10,T)),[[e.vShow,c.isActive]])}var h=f(g,[["render",I]]);class v{get(l){const t=JSON.parse(localStorage.getItem(l));return t?new Date(t.expires)<new Date?(localStorage.removeItem(l),null):t.value:null}set(l,t,c){const o=new Date().getTime(),d=new Date(o+c*6e4);localStorage.setItem(l,JSON.stringify({value:t,expires:d}))}}var m=new v;const C={props:{cacheLifetime:{type:Number,default:5},tabsId:{type:String,default:""},options:{type:Object,required:!1,default:()=>({useUrlFragment:!0,defaultTabHash:null})},wrapperClass:{type:String,default:"tabs-component"},panelsWrapperClass:{type:String,default:"tabs-component-panels"},navClass:{type:String,default:"tabs-component-tabs"},navItemClass:{type:String,default:"tabs-component-tab"},navItemDisabledClass:{type:String,default:"is-disabled"},navItemActiveClass:{type:String,default:"is-active"},navItemLinkClass:{type:String,default:"tabs-component-tab-a"},navItemLinkActiveClass:{type:String,default:"is-active"},navItemLinkDisabledClass:{type:String,default:"is-disabled"}},emits:["changed","clicked"],setup(a,l){const t=e.reactive({activeTabHash:"",lastActiveTabHash:"",tabs:[]}),c=a.tabsId?a.tabsId:"";e.provide("tabsProvider",t),e.provide("addTab",n=>{t.tabs.push(n)}),e.provide("updateTab",(n,s)=>{let i=t.tabs.findIndex(b=>b.computedId===n);s.isActive=t.tabs[i].isActive,t.tabs[i]=s}),e.provide("deleteTab",n=>{let s=t.tabs.findIndex(i=>i.computedId===n);t.tabs.splice(s,1)});const o=(n,s)=>{s&&!a.options.useUrlFragment&&s.preventDefault();const i=d(n);if(!i)return;if(s&&i.isDisabled){s.preventDefault();return}if(t.lastActiveTabHash===i.hash){l.emit("clicked",{tab:i});return}t.tabs.forEach(p=>{p.isActive=p.hash===i.hash}),l.emit("changed",{tab:i}),t.lastActiveTabHash=t.activeTabHash=i.hash;const b=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`;m.set(b+this.compTabsId.value,i.hash,a.cacheLifetime)},d=n=>t.tabs.find(s=>s.hash===n);return e.onMounted(()=>{if(!t.tabs.length)return;if(window.addEventListener("hashchange",()=>o(window.location.hash)),d(window.location.hash)){o(window.location.hash);return}const n=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`,s=m.get(n+c.value);if(d(s)){o(s);return}if(a.options.defaultTabHash&&d("#"+a.options.defaultTabHash)){o("#"+a.options.defaultTabHash);return}o(t.tabs[0].hash)}),{...e.toRefs(t),selectTab:o,findTab:d}}},w=["aria-controls","aria-selected","href","onClick","innerHTML"];function S(a,l,t,c,o,d){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.wrapperClass)},[e.createElementVNode("ul",{role:"tablist",class:e.normalizeClass(t.navClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.tabs,(n,s)=>(e.openBlock(),e.createElementBlock("li",{key:s,class:e.normalizeClass([t.navItemClass,n.isDisabled?t.navItemDisabledClass:"",n.isActive?t.navItemActiveClass:""]),role:"presentation"},[e.createElementVNode("a",{role:"tab",class:e.normalizeClass([t.navItemLinkClass,n.isDisabled?t.navItemLinkDisabledClass:"",n.isActive?t.navItemLinkActiveClass:""]),"aria-controls":n.hash,"aria-selected":n.isActive,href:n.hash,onClick:i=>c.selectTab(n.hash,i),innerHTML:n.header},null,10,w)],2))),128))],2),e.createElementVNode("div",{class:e.normalizeClass(t.panelsWrapperClass)},[e.renderSlot(a.$slots,"default")],2)],2)}var u=f(C,[["render",S]]),y={install(a){a.component("tab",h),a.component("tabs",u)}};r.Tab=h,r.Tabs=u,r.default=y,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
