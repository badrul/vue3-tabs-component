(function(d,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis!="undefined"?globalThis:d||self,e(d.VueTabs={},d.Vue))})(this,function(d,e){"use strict";var b=(a,c)=>{const t=a.__vccOpts||a;for(const[i,o]of c)t[i]=o;return t};const g={name:"Tab",props:{panelClass:{type:String,default:"tabs-component-panel"},id:{type:String,default:null},name:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},isDisabled:{type:Boolean,default:!1}},setup(a){const c=e.ref(!1),t=e.inject("tabsProvider"),i=e.inject("addTab"),o=e.inject("updateTab"),l=e.inject("deleteTab"),n=a.prefix+a.name+a.suffix,s=a.id?a.id:a.name.toLowerCase().replace(/ /g,"-"),r="#"+(a.isDisabled?"":s);return e.watch(()=>t.activeTabHash,()=>{c.value=r===t.activeTabHash}),e.watch(()=>Object.assign({},a),()=>{o(s,{name:a.name,header:a.prefix+a.name+a.suffix,isDisabled:a.isDisabled,hash:r,index:t.tabs.length,computedId:s})}),e.onBeforeMount(()=>{i({name:a.name,header:n,isDisabled:a.isDisabled,hash:r,index:t.tabs.length,computedId:s})}),e.onBeforeUnmount(()=>{l(s)}),{header:n,computedId:s,hash:r,isActive:c}}},p=["id","aria-hidden"];function T(a,c,t,i,o,l){return e.withDirectives((e.openBlock(),e.createElementBlock("section",{id:i.computedId,ref:"tab","aria-hidden":!i.isActive,class:e.normalizeClass(t.panelClass),role:"tabpanel"},[e.renderSlot(a.$slots,"default")],10,p)),[[e.vShow,i.isActive]])}var f=b(g,[["render",T]]);class C{get(c){const t=JSON.parse(localStorage.getItem(c));return t?new Date(t.expires)<new Date?(localStorage.removeItem(c),null):t.value:null}set(c,t,i){const o=new Date().getTime(),l=new Date(o+i*6e4);localStorage.setItem(c,JSON.stringify({value:t,expires:l}))}}var h=new C;const w={props:{cacheLifetime:{type:Number,default:5},tabsId:{type:String,default:""},options:{type:Object,required:!1,default:()=>({useUrlFragment:!0,defaultTabHash:null})},wrapperClass:{type:String,default:"tabs-component"},panelsWrapperClass:{type:String,default:"tabs-component-panels"},navClass:{type:String,default:"tabs-component-tabs"},navItemClass:{type:String,default:"tabs-component-tab"},navItemDisabledClass:{type:String,default:"is-disabled"},navItemActiveClass:{type:String,default:"is-active"},navItemLinkClass:{type:String,default:"tabs-component-tab-a"},navItemLinkActiveClass:{type:String,default:"is-active"},navItemLinkDisabledClass:{type:String,default:"is-disabled"}},emits:["changed","clicked"],setup(a,c){const t=e.reactive({activeTabHash:"",lastActiveTabHash:"",tabs:[]});e.provide("tabsProvider",t),e.provide("addTab",l=>{t.tabs.push(l)}),e.provide("updateTab",(l,n)=>{let s=t.tabs.findIndex(r=>r.computedId===l);n.isActive=t.tabs[s].isActive,t.tabs[s]=n}),e.provide("deleteTab",l=>{let n=t.tabs.findIndex(s=>s.computedId===l);t.tabs.splice(n,1)});const i=(l,n)=>{n&&!a.options.useUrlFragment&&n.preventDefault();const s=o(l);if(!s)return;if(n&&s.isDisabled){n.preventDefault();return}if(t.lastActiveTabHash===s.hash){c.emit("clicked",{tab:s});return}t.tabs.forEach(u=>{u.isActive=u.hash===s.hash}),c.emit("changed",{tab:s}),t.lastActiveTabHash=t.activeTabHash=s.hash;const r=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`;h.set(r+a.tabsId,s.hash,a.cacheLifetime)},o=l=>t.tabs.find(n=>n.hash===l);return e.onMounted(()=>{if(!t.tabs.length)return;if(window.addEventListener("hashchange",()=>i(window.location.hash)),o(window.location.hash)){i(window.location.hash);return}const l=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`,n=h.get(l+a.tabsId);if(o(n)){i(n);return}if(a.options.defaultTabHash&&o("#"+a.options.defaultTabHash)){i("#"+a.options.defaultTabHash);return}i(t.tabs[0].hash)}),{...e.toRefs(t),selectTab:i,findTab:o}}},I=["aria-controls","aria-selected","href","onClick","innerHTML"];function S(a,c,t,i,o,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.wrapperClass)},[e.createElementVNode("ul",{role:"tablist",class:e.normalizeClass(t.navClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.tabs,(n,s)=>(e.openBlock(),e.createElementBlock("li",{key:s,class:e.normalizeClass([t.navItemClass,n.isDisabled?t.navItemDisabledClass:"",n.isActive?t.navItemActiveClass:""]),role:"presentation"},[e.createElementVNode("a",{role:"tab",class:e.normalizeClass([t.navItemLinkClass,n.isDisabled?t.navItemLinkDisabledClass:"",n.isActive?t.navItemLinkActiveClass:""]),"aria-controls":n.hash,"aria-selected":n.isActive,href:n.hash,onClick:r=>i.selectTab(n.hash,r),innerHTML:n.header},null,10,I)],2))),128))],2),e.createElementVNode("div",{class:e.normalizeClass(t.panelsWrapperClass)},[e.renderSlot(a.$slots,"default")],2)],2)}var m=b(w,[["render",S]]),v={install(a){a.component("tab",f),a.component("tabs",m)}};d.Tab=f,d.Tabs=m,d.default=v,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
